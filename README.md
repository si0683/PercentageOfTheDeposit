Volume Calculation Methods for OsEngine PercentageOfTheDeposit
–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –æ–±—ä—ë–º–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤ OsEngine. –õ–æ–≥–∏–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –±–∏—Ä–∂: –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–µ —Å–ø–æ—Ç-–ø–∞—Ä—ã, perpetual-—Ñ—å—é—á–µ—Ä—Å—ã, inverse-—Ñ—å—é—á–µ—Ä—Å—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MOEX.
–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Ä–∏—Å–∫–µ, –∫–æ–º–∏—Å—Å–∏–π, —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –∏ —Ç–∏–ø–∞ —Ä—ã–Ω–∫–∞.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
1) –ú–µ—Ç–æ–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç:
- —Ç–∏–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
- spot (USDT),
- perpetual (USDT.P),
- inverse futures (BTCUSD, ETHUSD –∏ –¥—Ä.),
- MOEX (—á–µ—Ä–µ–∑ Security.Exchange);
- –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –≤–∞–ª—é—Ç—É –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è (USDT, RUB, USD, BTC –∏ —Ç. –¥.);
- —Å–≤–æ–±–æ–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤ –Ω—É–∂–Ω–æ–π –≤–∞–ª—é—Ç–µ;

2) –°—á–∏—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ–±—ä—ë–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å —É—á—ë—Ç–æ–º:
- –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Ä–∏—Å–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É,
- —Å—Ç–æ–ø-–ø—Ä–æ—Ü–µ–Ω—Ç–∞,
- –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è,
- –∫–æ–º–∏—Å—Å–∏–∏ (—É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥),

Lot, DecimalsVolume, PriceStepCost, PriceStep –¥–ª—è MOEX-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

–û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞
–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ (—Å —É—á—ë—Ç–æ–º —Å—Ç–æ–ø–∞, –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∏ –∫–æ–º–∏—Å—Å–∏–∏):
realStopPct = stopPct + slippagePct + feePct * 2

–î–µ–Ω—å–≥–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–∏—Å–∫—É–µ–º:
riskMoney = balance * (riskPercent / 100)

–î–µ–Ω—å–≥–∏ –ø–æ–¥ –ø–æ–∑–∏—Ü–∏—é:
positionMoney = riskMoney / realStopPct

–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:
inverse futures:
qty = positionMoney * price

spot / perpetual / MOEX:
qty = positionMoney / price / Lot

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ–±—ä—ë–º–∞:
–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø–æ–¥ DecimalsVolume,
—Å–ø–µ—Ü-—Ä–∞—Å—á—ë—Ç –ø–æ–¥ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å PriceStepCost (—Ñ—å—é—á–µ—Ä—Å—ã MOEX).

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è
–í –∫–æ–¥ –≤–∫–ª—é—á–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:

üîπ GetVolume(...)

–ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π:
- –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞,
- –ø–æ–ª—É—á–∞–µ—Ç –±–∞–ª–∞–Ω—Å,
- —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–ø, —Ä–∏—Å–∫, –∫–æ–º–∏—Å—Å–∏–∏,
- –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è,
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ–±—ä—ë–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö.

üîπ AdjustQty(...)
–ü—Ä–∏–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É (–æ–±—Ä–µ–∑–∞–µ—Ç –ª–∏—à–Ω–∏–µ –∑–Ω–∞–∫–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π, —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É MOEX-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤).

üîπ GetCryptoBalance(...)
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ –Ω—É–∂–Ω–æ–π –≤–∞–ª—é—Ç–µ –¥–ª—è –∫—Ä–∏–ø—Ç–æ—Ä—ã–Ω–∫–∞.

üîπ GetMoexBalance(...)
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å –≤ —Ä—É–±–ª—è—Ö –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏.

üîπ DetectRequiredCurrency(...)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞–∑–æ–≤—É—é –≤–∞–ª—é—Ç—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
–Ω–∞–ø—Ä–∏–º–µ—Ä, BTCUSD ‚Üí BTC, ETHUSD ‚Üí ETH, BTCUSDT ‚Üí USDT.

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ú–µ—Ç–æ–¥—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –≤—Å–µ—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ —á–µ—Ä–µ–∑ OsEngine Log:
- –±–∞–ª–∞–Ω—Å,
- —Ä–∏—Å–∫,
- –∏—Ç–æ–≥–æ–≤—ã–π realStopPct,
- –∏—Ç–æ–≥–æ–≤—ã–µ —Å—É–º–º—ã,
- —Ç–∏–ø –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞,
- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Lot, DecimalsVolume.

–î–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ —É–∂–µ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –≤ –≤–∞—à–µ–º —Ä–æ–±–æ—Ç–µ! –ü–æ–ª—å–∑—É–π—Ç–µ—Å—å!
author SidorenkoVA

